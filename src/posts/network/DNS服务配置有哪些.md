---
title: DNS服务配置有哪些
index_img: /images/bg/k8s.webp
banner_img: /images/bg/5.jpg
tags:
  - network
categories:
  - kubernetes
date: 2023-09-15 15:50:12
excerpt: 什么是DNS，在Linux上相关的配置有哪些，怎么使用
sticky: 1
hide: false
---

### 一、什么是DNS

1. DNS（Domain Name System）是一个用于将域名转换为与之关联的IP地址的分布式系统。

在Linux上，有几个与DNS相关的配置：

### 二、Linux与DNS相关命令

1. `/etc/resolv.conf`文件：这个文件包含了DNS服务器的配置信息，如名称服务器的IP地址、搜索域等。

``` bash
# 未配置DNS Server的
[root@i-62BEC048 ~]# cat /etc/resolv.conf
# Generated by NetworkManager


# 已经配置了DNS Server的
[root@i-62BEC048 ~]# cat /etc/resolv.conf
# Generated by NetworkManager
nameserver 114.114.114.114
```

2. Ubuntu 下 DNS 解析相关的命令`systemd-resolve`


``` bash
# 1.查看 DNS 服务状态
$ systemd-resolve --status

# 2.解析域名的的 IP
$ systemd-resolve DOMAIN

# 3.nslookup 解析domain
$ nslookup baidu.com

# 4.设置网卡的 DNS Server
$ systemd-resolve --set-dns={DNS_SERVER_IP} --interface {ITERFACE_NAME}

# 5.重置网卡DNS配置
$ systemd-resolve --revert --interface {ITERFACE_NAME}

# 6.刷新网卡DNS缓存
$ systemd-resolve --flush-caches

# 7.查看DNS相关配置
$ systemd-resolve --statistics
```

3. hosts文件

``` bash
$ cat /etc/hosts
```

### Q&A

1. nameserver 114.114.114.114是什么来的

114.114.114.114是中国电信运营商提供的公共的DNS服务器。DNS服务器用于转换域名（如www.google.com）和IP地址之间的对应关系，以便让计算机能够在互联网上进行通信。通过指定114.114.114.114作为DNS服务器，可以使用中国电信的DNS服务来解析域名。


2. server 8.8.8.8

`dns-nameservers 8.8.8.8`是用来指定DNS服务器的IP地址，其中8.8.8.8是Google提供的公共DNS服务器的IP地址。DNS服务器用于将域名解析为对应的IP地址。

在Linux上，可以通过设置`dns-nameservers`来指定所使用的DNS服务器。在上述示例中，`dns-nameservers 8.8.8.8`表示使用Google的DNS服务器进行域名解析。

在与`nameserver 114.114.114.114`的关系上，`nameserver 114.114.114.114`是指定的另一个DNS服务器的IP地址，由中国电信提供。不同的`nameserver`配置指定了不同的DNS服务器，用于解析域名。根据需要，可以根据实际情况选择使用不同的DNS服务器进行域名解析。