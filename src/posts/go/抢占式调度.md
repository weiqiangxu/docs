---
title: 抢占式调度
---

### 一、什么是抢占式调度

一种操作系统或实时系统中的任务调度策略。操作系统可以在一个任务执行过程中，中断当前正在执行的任务，将 CPU（中央处理器）的控制权强行转移给另一个更紧急或更高优先级的任务。

- 基于优先级的抢占：系统为每个任务分配一个优先级。当一个高优先级的任务准备就绪时，即使当前有低优先级的任务正在执行，系统也会立即暂停低优先级任务，转而执行高优先级任务。

- 基于时间片的抢占：系统给每个任务分配一个固定的时间片来使用 CPU。当一个任务的时间片用完后，即使任务还没有执行完，系统也会暂停该任务，将 CPU 分配给下一个等待执行的任务。

> 非抢占式调度：在非抢占式调度中，一旦一个任务开始执行，它将一直占用 CPU，直到该任务主动放弃 CPU 控制权（例如，任务执行完毕、进行 I/O 操作而阻塞等）。


### 二、GMP的抢占式调度

GMP分别代表`Goroutine`（协程）、`Machine`（工作线程）和`Processor`（逻辑处理器）。从 `Go 1.14` 版本开始，引入了**基于信号**的强制抢占机制。当一个协程运行时间过长（超过一定的阈值，大约 10 毫秒左右），运行时系统`Runtime`会通过向协程所在的`线程`发送信号（如`SIGURG`）来触发抢占。

> Go 程序能够更有效地利用 CPU 资源，避免某些协程长时间占用资源而导致其他协程饥饿的情况。

### 相关文档

- [Golang合集](https://www.bilibili.com/video/BV1hv411x7we)
